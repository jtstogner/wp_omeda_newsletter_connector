!function(e){"use strict";var n,t,a;function l(){var n=e(".ngl-popup-panel").find(".ngl-popup-settings").attr("data-block"),t=e(".ngl-popup-panel").find(".ngl-popup-demo").attr("data-block");e(".ngl-popup-overlay").removeClass("ngl-active"),e("body").removeClass("ngl-popup-hidden"),e(".ngl-popup-panel .ngl-popup-settings").appendTo(e(".ngl-block[data-block="+n+"]")),e(".ngl-popup-panel .ngl-popup-demo").appendTo(e(".ngl-block[data-block="+t+"]"))}function s(){e(".ngl-card-state.is-testing").removeClass("ngl-hidden"),e(".ngl-card-state.is-invalid").addClass("ngl-hidden")}function i(){e(".ngl-card-state.is-testing").addClass("ngl-hidden"),e(".ngl-card-state.is-invalid").removeClass("ngl-hidden")}function r(){e(".ngl-card-state.is-testing").addClass("ngl-hidden"),e(".ngl-card-state.is-working").removeClass("ngl-hidden"),e(".ngl-card-view").length&&setTimeout((function(){e(".ngl-card-state, .ngl-card-add2").addClass("ngl-hidden"),e(".ngl-card-view-"+n).length?e(".ngl-card-view-"+n).removeClass("ngl-hidden"):e(".ngl-card-view").removeClass("ngl-hidden")}),2e3)}function o(){e(".ngl-modal-overlay").addClass("off")}function d(){var n=e(".ngl-metabox"),t=n.find("#ngl_app").val();if(0==n.length)return!1;if(e(".ngl-settings").length)return!1;var a=!0;if(n.find("input[type=text].is-required").each((function(){""==e(this).val()||"1"==e(this).attr("data-force-unready")?(a=!1,e(this).closest(".ngl-metabox-flex").addClass("is-error")):e(this).closest(".ngl-metabox-flex").removeClass("is-error")})),n.find(".dropdown.is-required").each((function(){""==e(this).dropdown("get value")?(a=!1,e(this).closest(".ngl-metabox-flex").addClass("is-error")):e(this).closest(".ngl-metabox-flex").removeClass("is-error")})),n.find("#ngl_send_newsletter").is(":checked")?(e("#ngl_send_newsletter2").prop("checked",!0),e("#ngl_double_confirm").val("yes")):(e("#ngl_send_newsletter2").prop("checked",!1),e("#ngl_double_confirm").val("no")),"campaignmonitor"===t){var l=e("#ngl_lists").parent().dropdown("get value"),s=e("#ngl_segments").parent().dropdown("get value");l&&0!=l.length||s&&0!=s.length?e("#ngl_lists, #ngl_segments").parents(".ngl-metabox-flex").removeClass("is-error"):(a=!1,e("#ngl_lists, #ngl_segments").parents(".ngl-metabox-flex").addClass("is-error"))}if(a)e(".ngl-ready").removeClass("is-hidden"),e(".ngl-not-ready").addClass("is-hidden"),e(".ngl-not-ready").parents(".ngl-metabox-flex.alt3").removeClass("ngl-unready"),e(".ngl-newsletter-errors").remove(),e(".ngl-top-checkbox").removeClass("disable-send");else{if(e(".ngl-ready").addClass("is-hidden"),e(".ngl-not-ready").removeClass("is-hidden"),e(".ngl-not-ready").parents(".ngl-metabox-flex.alt3").addClass("ngl-unready"),0==e(".ngl-newsletter-errors").length){e(".editor-header__settings").prepend('<span class="ngl-newsletter-errors">'+newsletterglue_params.publish_error+"</span>")}e(".ngl-top-checkbox").addClass("disable-send"),e("#ngl_double_confirm").val("no")}e("#ngl_send_newsletter").is(":checked")||(e(".ngl-newsletter-errors").remove(),e(".ngl-top-checkbox").removeClass("disable-send"))}function g(){if(0==e("#ngl_from_email").length)return!1;var n=e("#ngl_from_email"),t=n.val(),a=n.parent().parent().parent(),l=e("#ngl_app").val(),s="action=newsletterglue_ajax_verify_email&security="+newsletterglue_params.ajaxnonce+"&email="+t+"&app="+l;if(a.parents(".ngl-metabox-if-checked").hasClass("ngl-metabox-placeholder"))return!1;e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:s,beforeSend:function(){e("#ngl_from_email").hasClass("no-support-verify")||(a.find(".ngl-process").addClass("is-hidden"),a.find(".ngl-process.is-waiting").removeClass("is-hidden"),a.find(".ngl-label-more").empty())},success:function(t){a.find(".ngl-process").addClass("is-hidden"),t.success||!0===t?(t.success&&(e("#ngl_from_email").hasClass("no-support-verify")||(a.find(".ngl-process.is-valid").removeClass("is-hidden"),a.find(".ngl-process.is-valid .ngl-process-text").html(t.success),setTimeout((function(){a.find(".ngl-process").addClass("is-hidden")}),1500))),n.parent().parent().parent().removeClass("is-error"),n.attr("data-force-unready","0")):(a.find(".ngl-process.is-invalid").removeClass("is-hidden"),a.find(".ngl-process.is-invalid .ngl-process-text").html(t.failed),t.failed_details&&a.find(".ngl-label-more").html(t.failed_details),n.parent().parent().parent().addClass("is-error"),n.attr("data-force-unready","1")),d()}})}e(".ngl .ui.dropdown, .ngl-metabox .ui.dropdown").dropdown({onChange:function(){d()}}),e(".ngl .ui.checkbox").checkbox();var c=null,u=null;if(wp.data&&wp.data.select("core/editor")&&wp.data.subscribe((function(){c=wp.data.select("core/editor").getEditorSettings().colors,u=wp.data.select("core/editor").getEditorSettings().fontSizes})),e(".ngl-select-frequency").length){var p=e(".ngl-select-frequency select").val();"monthly"==p?(e(".ngl-select-monthday").show(),e(".ngl-select-weekday").hide(),e(".ngl-select-monthfr").show(),e(".ngl-select-day-exception").hide()):e(".ngl-select-monthfr").hide(),"weekly"==p&&(e(".ngl-select-monthday").hide(),e(".ngl-select-weekday").show(),e(".ngl-select-day-exception").hide()),"two_weeks"==p&&(e(".ngl-select-monthday").hide(),e(".ngl-select-weekday").show(),e(".ngl-select-day-exception").hide()),"daily"==p&&(e(".ngl-select-monthday").hide(),e(".ngl-select-weekday").hide(),e(".ngl-select-day-exception").show()),"two_mins"==p?(e(".ngl-select-frequency-on").hide(),e(".ngl-select-day-exception").hide()):(e(".ngl-select-frequency-on").show(),e(".ngl-select-day-exception").show())}function m(){var n=e(".ngl-gutenberg-pop");n.removeClass("is-open"),n.css({left:0,top:0}),n.find(".ngl-fallback").hide(),n.find("button.ngl-submenu-item").removeClass("is-active")}if(e(document).on("change",".ngl-select-frequency select",(function(){var n=e(".ngl-select-frequency select").val();"monthly"==n?(e(".ngl-select-monthday").show(),e(".ngl-select-weekday").hide(),e(".ngl-select-monthfr").show(),e(".ngl-select-day-exception").hide()):e(".ngl-select-monthfr").hide(),"weekly"==n&&(e(".ngl-select-monthday").hide(),e(".ngl-select-weekday").show(),e(".ngl-select-day-exception").hide()),"two_weeks"==n&&(e(".ngl-select-monthday").hide(),e(".ngl-select-weekday").show(),e(".ngl-select-day-exception").hide()),"daily"==n&&(e(".ngl-select-monthday").hide(),e(".ngl-select-weekday").hide(),e(".ngl-select-day-exception").show()),"two_mins"==n?(e(".ngl-select-frequency-on").hide(),e(".ngl-select-day-exception").hide()):e(".ngl-select-frequency-on").show()})),e(document).on("change",".ngl-modal[data-app=campaignmonitor] #ngl_lists",(function(){var n=e(this).val(),t=!1;if(n&&n.length)t=!0;else{var a=e(".ngl-modal[data-app=campaignmonitor] #ngl_segments").parents(".ui").dropdown("get value");a&&0!=a.length||(t=!1)}t?(e(this).parents(".ngl-metabox-flex").removeClass("is-error"),e(".ngl-modal[data-app=campaignmonitor] #ngl_segments").parents(".ngl-metabox-flex").removeClass("is-error"),e(".ngl-boarding-next").removeClass("disabled").addClass("ready")):(e(this).parents(".ngl-metabox-flex").addClass("is-error"),e(".ngl-modal[data-app=campaignmonitor] #ngl_segments").parents(".ngl-metabox-flex").addClass("is-error"),e(".ngl-boarding-next").addClass("disabled").removeClass("ready"))})),e(document).on("change",".ngl-modal[data-app=campaignmonitor] #ngl_segments",(function(){var n=e(this).val(),t=!1;if(n&&n.length)t=!0;else{var a=e(".ngl-modal[data-app=campaignmonitor] #ngl_lists").parents(".ui").dropdown("get value");a&&0!=a.length||(t=!1)}t?(e(this).parents(".ngl-metabox-flex").removeClass("is-error"),e(".ngl-modal[data-app=campaignmonitor] #ngl_lists").parents(".ngl-metabox-flex").removeClass("is-error"),e(".ngl-boarding-next").removeClass("disabled").addClass("ready")):(e(this).parents(".ngl-metabox-flex").addClass("is-error"),e(".ngl-modal[data-app=campaignmonitor] #ngl_lists").parents(".ngl-metabox-flex").addClass("is-error"),e(".ngl-boarding-next").addClass("disabled").removeClass("ready"))})),e(".ngl-date").flatpickr({enableTime:!0,dateFormat:"Y-m-d H:i:s",altInput:!0,enableSeconds:!0,altFormat:"H:i:s, Y/m/d",minDate:"today",onChange:function(){d()}}),e(document).on("click",".ngl-card-add",(function(n){e(this).addClass("ngl-hidden"),e(".ngl-card-base").removeClass("ngl-hidden")})),e(".ngl-app").dropdown("setting","onChange",(function(t){e(this).parents(".ngl-card-base").addClass("ngl-hidden"),e(".ngl-card-"+t).removeClass("ngl-hidden"),e(".ngl-card-add2.ngl-card-"+(n=t)).find(".ngl-card-link-start").show()})),e(document).on("click",".ngl-back",(function(n){if(t)e(this).parent().parent().addClass("ngl-hidden");else{var a=e(this).attr("data-screen");e(".ngl-app").dropdown("clear"),e(this).parent().parent().addClass("ngl-hidden"),e("."+a).removeClass("ngl-hidden")}})),e(document).on("submit",".ngl-license-form",(function(n){n.preventDefault();var t=e(this),l=t.serialize()+"&action=newsletterglue_check_license&security="+newsletterglue_params.ajaxnonce,o=!1;return t.find("input[type=text]:visible").each((function(){""==e(this).val()&&(e(this).addClass("error").focus(),o=!0)})),o||(a=e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:l,beforeSend:function(){s()},success:function(n){setTimeout((function(){"invalid"===n.status&&(t.parents(".ngl-cards").find(".ngl-card-state.is-invalid .ngl-card-state-text").html(n.message),i(),e(".ngl-license-review").show()),"valid"===n.status&&(r(),e(".ngl-license-review").hide(),e(".ngl-card-heading-sub").html(n.tier_name))}),1e3)},error:function(){i()}})),!1})),e(document).on("submit",".ngl-fields form",(function(t){t.preventDefault();var l=e(this),o=e(this).parents(".ngl-card-add2").attr("data-app"),d=l.serialize()+"&action=newsletterglue_ajax_connect_api&security="+newsletterglue_params.ajaxnonce+"&app="+o;n=o;var g=!1;return e(".ngl-card-"+o).hasClass("ngl-hidden")||l.find("input[type=text]:visible").each((function(){""==e(this).val()&&(e(this).addClass("error").focus(),g=!0)})),g||(a=e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:d,beforeSend:function(){s()},success:function(e){console.log(e),setTimeout((function(){"invalid"===e.response&&i(),"successful"===e.response&&r()}),1e3)}})),!1})),e(document).on("click",".ngl-ajax-stop-test",(function(n){return n.preventDefault(),e(this).parents(".ngl-card-state").addClass("ngl-hidden"),a.abort(),!1})),e(document).on("click",".ngl-ajax-test-connection",(function(t){return t.preventDefault(),(n=e(this).parents(".ngl-card-view").attr("data-app"))?e(".ngl-card-add2.ngl-card-"+n+" .ngl-fields form").trigger("submit"):e(".ngl-card-add2 .ngl-license-form").trigger("submit"),!1})),e(document).on("click",".ngl-ajax-test-again",(function(t){return t.preventDefault(),e(".ngl-card-add2 .ngl-fields form").length&&e('.ngl-card-add2[data-app="'+n+'"] .ngl-fields form').trigger("submit"),e(".ngl-card-add2 .ngl-license-form").length&&e(".ngl-card-add2 .ngl-license-form").trigger("submit"),!1})),e(document).on("click",".ngl-ajax-test-close",(function(n){return n.preventDefault(),e(".ngl-card-state.is-invalid").addClass("ngl-hidden"),!1})),e(document).on("click",".ngl-ajax-edit-connection",(function(a){return a.preventDefault(),e(".ngl-card-state.is-invalid").addClass("ngl-hidden"),e(this).parents(".ngl-card-view").is(":visible")&&(n=e(this).parents(".ngl-card-view").attr("data-app"),t=e(this).parents(".ngl-card-view-"+n)),n?(e(".ngl-card-add2.ngl-card-"+n).removeClass("ngl-hidden"),e(".ngl-card-add2.ngl-card-"+n).find(".ngl-card-link-start").show()):e(".ngl-card-add2.ngl-hidden").removeClass("ngl-hidden"),!1})),e(document).on("click",".ngl-ajax-remove-connection",(function(t){return t.preventDefault(),n=e(this).parents(".ngl-card-view").attr("data-app"),e(".ngl-ajax-remove").attr("data-ngl_app",n),e(".ngl-card-state.confirm-remove").removeClass("ngl-hidden"),!1})),e(document).on("click",".ngl-ajax-remove",(function(n){n.preventDefault(),e(".ngl-card-state.confirm-remove").addClass("ngl-hidden"),e(".ngl-card-state.is-removed").removeClass("ngl-hidden"),e(".ngl-app").dropdown("clear");var t=e(this).attr("data-ngl_app");if(t)var a="newsletterglue_ajax_remove_api";else a="newsletterglue_deactivate_license";if(t)var l="action="+a+"&security="+newsletterglue_params.ajaxnonce+"&app="+t;else l="action="+a+"&security="+newsletterglue_params.ajaxnonce;return e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:l,success:function(n){t||e("#newsletterglue_pro_license").val(""),setTimeout((function(){e(".ngl-card-add").removeClass("ngl-hidden"),e(".ngl-card-state, .ngl-card-add2, .ngl-card-view").addClass("ngl-hidden"),e(".ngl-cards").hasClass("ngl-cards-free")&&(e(".ngl-card-add2.ngl-card-mailchimp").removeClass("ngl-hidden"),e(".ngl-cards input[type=text]").val("")),e(".ngl-card-license-form").length&&e(".ngl-card-license-form").removeClass("ngl-hidden"),e(".ngl-is-free").length&&e(".ngl-is-free").show()}),2e3)}}),!1})),e(document).on("change","#ngl_send_newsletter",(function(){if(0==e(".ngl-top-checkbox").length&&0==e(".ngl-no-connection").length&&0==e(".ngl-msgbox-wrap:visible").length&&0==e(".ngl-reset:visible").length&&newsletterglue_params.send_newsletter){e(".editor-header__settings").prepend('<div class="ngl-top-checkbox"><label><input type="checkbox" name="ngl_send_newsletter2" id="ngl_send_newsletter2" value="1">'+newsletterglue_params.send_newsletter+"</label></div>")}d(),e(this).is(":checked")?(e(".ngl-admin-automation-mb").length&&("ready"===e(".ngl-automation-state").attr("data-state")?(e(".ngl-admin-automation-mb .ngl-stateful-send-text").html(newsletterglue_params.automation_run),e(".ngl-admin-automation-mb .ngl-field-master-help").html(newsletterglue_params.automation_r_help)):(e(".ngl-admin-automation-mb").addClass("is-enabled"),e(".ngl-admin-automation-mb .ngl-stateful-send-text").html(newsletterglue_params.automation_enabled),e(".ngl-admin-automation-mb .ngl-field-master-help").html(newsletterglue_params.automation_e_help))),e(".ngl-top-checkbox").removeClass("is-hidden")):(e(".ngl-admin-automation-mb").length&&(e(".ngl-admin-automation-mb").removeClass("is-enabled").addClass("is-paused"),e(".ngl-admin-automation-mb .ngl-stateful-send-text").html(newsletterglue_params.automation_paused),e(".ngl-admin-automation-mb .ngl-field-master-help").html(newsletterglue_params.automation_p_help)),e("#ngl_send_newsletter2").prop("checked",!1))})),e(document).on("change","#ngl_send_newsletter2",(function(){e(this).is(":checked")?e("#ngl_send_newsletter").prop("checked",!0).trigger("change"):e("#ngl_send_newsletter").prop("checked",!1).trigger("change")})),e(document).on("change","#newsletter_glue_metabox #ngl_from_email",(function(){g()})),e(document).on("change",".ngl-metabox input[type=text]",(function(){d()})),e(document).on("mouseleave focusout blur",".editor-post-title__input",(function(){0==e(".ngl-no-connection").length&&(e(this).children().remove().end().text().replace(/\s/g,"")&&e("#ngl_subject").length&&""==e("#ngl_subject").val().replace(/\s/g,"")&&e("#ngl_subject").val(e(this).children().remove().end().text()).trigger("change"))})),e(document).on("click",".ngl-reset-newsletter",(function(n){n.preventDefault();var t=e(this),a=e(this).attr("data-post_id"),l="action=newsletterglue_ajax_reset_newsletter&security="+newsletterglue_params.ajaxnonce+"&post_id="+a;return e("#ngl_double_confirm").val("no"),e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:l,beforeSend:function(){t.addClass("loading")},success:function(n){t.removeClass("loading"),e(".ngl-reset, .ngl-msgbox-wrap").addClass("is-hidden"),e(".ngl-send, .ngl-sending-box").removeClass("is-hidden")}}),!1})),e(document).on("click",".ngl-pause-automation",(function(n){n.preventDefault();var t=e(this),a=e(this).attr("data-post_id"),l="action=newsletterglue_ajax_reset_newsletter&security="+newsletterglue_params.ajaxnonce+"&post_id="+a;return e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:l,beforeSend:function(){t.addClass("loading")},success:function(n){t.removeClass("loading"),e("#ngl_send_newsletter").prop("checked",!1),e(".ngl-admin-automation-mb").removeClass("is-enabled is-automated is-automating").addClass("is-paused")}}),!1})),e(document).on("click",".ngl-test-email",(function(n){n.preventDefault();var t=e(this),a=e(this).attr("data-post_id"),l=t.parents(".ngl-metabox"),s="action=newsletterglue_ajax_test_email&security="+newsletterglue_params.ajaxnonce+"&post_id="+a;return l.find("input[type=text], select, input[type=hidden], textarea").each((function(){s=s+"&"+e(this).attr("id")+"="+encodeURIComponent(e(this).val())})),l.find("input[type=checkbox]").each((function(){e(this).is(":checked")&&(s=s+"&"+e(this).attr("id")+"=1")})),e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:s,beforeSend:function(){e(".ngl-is-default").hide(),e(".ngl-is-sending").show(),e(".ngl-test-result").hide()},success:function(n){console.log(n),e(".ngl-is-sending").hide(),e(".ngl-action-link").show(),n&&n.success?(e(".ngl-is-valid").show(),e(".ngl-test-result.ngl-is-valid").show().html(n.success)):(e(".ngl-is-invalid").show(),n&&n.fail?e(".ngl-test-result.ngl-is-invalid").show().html(n.fail):e(".ngl-test-result.ngl-is-invalid").show().html(newsletterglue_params.unknown_error))}}),!1})),e(document).on("click",".ngl-retest",(function(n){return n.preventDefault(),e(".ngl-action-link, .ngl-action button, .ngl-is-valid, .ngl-is-invalid").hide(),e(".ngl-is-default").show(),!1})),e(document).on("click",".ngl-newsletter-errors a",(function(n){return n.preventDefault(),e(".ngl-metabox .is-error").find("input:first").focus(),!1})),e(document).on("click",'a[href="#ngl-status-log"]',(function(n){n.preventDefault();var t=e(this);e(this).attr("data-post_id");return function(n){var t=e(".ngl-modal-overlay");t.removeClass("off"),e(".ngl-modal-loader");var a=n.attr("data-post-id"),l="action=newsletterglue_ajax_get_log&security="+newsletterglue_params.ajaxnonce+"&post_id="+a;e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:l,beforeSend:function(){t.html('<div class="ngl-modal ngl-modal-loader"><div class="ngl-loading"></div></div>')},success:function(e){t.find(".ngl-modal-loader").replaceWith(e)}})}(t),!1})),e(document).on("click",".ngl-modal-close",(function(e){return e.preventDefault(),o(),!1})),e(document).on("click",".ngl-modal-overlay:not(.onboarding)",(function(e){return e.preventDefault(),o(),!1})),e(document).on("click",".ngl-modal",(function(e){e.stopPropagation()})),e(document).on("click",".editor-post-publish-button",(function(n){if(e(".ngl-automation-state").length){var t=e(".ngl-automation-state").attr("data-state"),a=e("#ngl_send_newsletter").is(":checked");"ready"===t&&a&&(e(".ngl-automation-state").attr("data-state","enabled"),e(".ngl-admin-automation-mb").addClass("is-enabled").removeClass("is-paused"),e(".ngl-admin-automation-mb .ngl-stateful-send-text").html(newsletterglue_params.automation_enabled),e(".ngl-admin-automation-mb .ngl-field-master-help").html(newsletterglue_params.automation_e_help)),e(".block-editor-writing-flow").length&&a&&(e(".ngl-admin-automation-mb").addClass("is-automating"),e(".ngl-admin-automation-mb").prepend(newsletterglue_params.loader2),setTimeout((function(){e(".ngl-loader-automation").remove(),e(".ngl-admin-automation-mb").addClass("is-automated").removeClass("is-paused is-automating")}),1500))}e("#ngl_send_newsletter2").is(":checked")?(e("#ngl_double_confirm").val("yes"),e("#ngl_send_newsletter, #ngl_send_newsletter2").prop("checked",!1),e(".ngl-msgbox-wrap").removeClass("is-hidden"),e(".ngl-reset").addClass("is-hidden"),e(".ngl-top-checkbox").addClass("is-hidden"),e(".ngl-send, .ngl-sending-box").addClass("is-hidden"),e(".block-editor-writing-flow").length&&(e(".ngl-msgbox-wrap").find("div").css({opacity:0,"pointer-events":"none"}),e(".ngl-msgbox-wrap").html(newsletterglue_params.loader),setTimeout((function(){var n=e("#post_ID").val(),t="action=newsletterglue_ajax_get_newsletter_state&security="+newsletterglue_params.ajaxnonce+"&post_id="+n;e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:t,success:function(n){n&&e(".ngl-msgbox-wrap").empty().html(n)}})}),3e3))):"yes"==e("#ngl_double_confirm").val()&&e("#ngl_double_confirm").val("no")})),e(document).on("keydown",".ngl-textarea",(function(n){if(9==(n.keyCode||n.which)){n.preventDefault();var t=this.selectionStart,a=this.selectionEnd;e(this).val(e(this).val().substring(0,t)+"\t"+e(this).val().substring(a)),this.selectionStart=this.selectionEnd=t+1}})),e(document).on("click",".ngl-save-perms:not(.saved)",(function(n){n.preventDefault();var t=e(this),a=e("#ngl_select_role").val(),l=e('input[type=checkbox][name="ngl_perms_'+a+'"]'),s="action=newsletterglue_ajax_save_permissions&security="+newsletterglue_params.ajaxnonce+"&role="+a;return l.each((function(){var n=e(this).is(":checked")?1:0;s=s+"&"+e(this).val()+"="+n})),e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:s,beforeSend:function(){t.html(newsletterglue_params.saving)},success:function(e){t.addClass("saved").html(newsletterglue_params.saved),setTimeout((function(){t.removeClass("saved").html(newsletterglue_params.save)}),2e3),console.log(e)}}),!1})),e(document).on("click",".ngl-save-slug:not(.saved)",(function(n){n.preventDefault();var t=e(this),a=encodeURIComponent(e("#newsletterglue_post_type_ep").val()),l=encodeURIComponent(e("#newsletterglue_home_url").val()),s="action=newsletterglue_ajax_save_slugs&security="+newsletterglue_params.ajaxnonce+"&slug="+a+"&url="+l;return e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:s,beforeSend:function(){t.html(newsletterglue_params.saving)},success:function(e){t.addClass("saved").html(newsletterglue_params.saved),setTimeout((function(){t.removeClass("saved").html(newsletterglue_params.save)}),2e3),console.log(e)}}),!1})),e(document).on("click",".ngl-settings-save:not(.saved)",(function(n){return n.preventDefault(),e(".ngl-settings-main input[type=text], .ngl-settings-main textarea, .ngl-settings-main input[type=checkbox], .ngl-settings-main select").trigger("change"),!1})),e(document).on("change",".ngl-settings-main input[type=text], .ngl-settings-main textarea, .ngl-settings-main input[type=checkbox], .ngl-settings-main select, .ngl-boarding .ngl-metabox-segment select",(function(){if(!e("body").find(".ngl-theme").length){var n=e(this).closest(".ngl-metabox-flex"),t=e(".ngl-settings-save"),a=e(this).attr("id"),l=e(this).val();e(this).is(":checkbox")&&(l=e(this).is(":checked")?1:0);var s=e(this).is("textarea");l=encodeURIComponent(l);var i="action=newsletterglue_ajax_save_field&security="+newsletterglue_params.ajaxnonce+"&id="+a+"&value="+l;e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:i,beforeSend:function(){n.find(".ngl-label-verification .ngl-process").addClass("is-hidden"),n.find(".ngl-label-verification .ngl-process.is-waiting").removeClass("is-hidden"),s||n.find(".ngl-label-more").empty(),t.html(newsletterglue_params.saving),"ngl_from_email"==a&&e(".ngl-boarding").length&&e(".ngl-boarding-next").addClass("disabled")},success:function(l){t.addClass("saved").html(newsletterglue_params.saved),setTimeout((function(){t.removeClass("saved").html(newsletterglue_params.save)}),2e3),n.find(".ngl-label-verification .ngl-process").addClass("is-hidden"),l.failed?(n.find(".ngl-label-verification .ngl-process.is-invalid").removeClass("is-hidden"),n.find(".ngl-label-verification .ngl-process.is-invalid .ngl-process-text").html(l.failed),n.addClass("is-error"),l.failed_details&&!s&&n.find(".ngl-label-more").html(l.failed_details)):l.success?(n.find(".ngl-label-verification .ngl-process.is-valid").removeClass("is-hidden"),"ngl_from_email"==a&&e("#ngl_from_email").hasClass("no-support-verify")||n.find(".ngl-label-verification .ngl-process.is-valid .ngl-process-text").html(l.success),n.removeClass("is-error")):(n.removeClass("is-error"),n.find(".ngl-label-verification .ngl-process.is-valid").removeClass("is-hidden"),setTimeout((function(){n.find(".ngl-label-verification .ngl-process").addClass("is-hidden")}),1500)),n.hasClass("is-error")||("ngl_from_email"==a&&e(".ngl-boarding").length&&setTimeout((function(){e(".ngl-boarding-next").removeClass("disabled").addClass("ready")}),1500),setTimeout((function(){n.find(".ngl-label-verification .ngl-process").addClass("is-hidden")}),1500));var i=e(".ngl-modal[data-app=campaignmonitor]:visible");if(i.length){var r=i.find("#ngl_lists").parents(".ui").dropdown("get value"),o=i.find("#ngl_segments").parents(".ui").dropdown("get value");r&&0!=r.length||o&&0!=o.length?(i.find("#ngl_lists").parents(".ngl-metabox-flex").removeClass("is-error"),i.find("#ngl_segments").parents(".ngl-metabox-flex").removeClass("is-error")):(i.find("#ngl_lists").parents(".ngl-metabox-flex").addClass("is-error"),i.find("#ngl_segments").parents(".ngl-metabox-flex").addClass("is-error"))}}})}})),e(document).on("click",".ngl-customize-toggle",(function(n){return n.preventDefault(),e(this).find("i").hasClass("down")?(e(this).find("i").removeClass("down").addClass("up"),e(".ngl-customize-preview").show()):(e(this).find("i").removeClass("up").addClass("down"),e(".ngl-customize-preview").hide()),!1})),e(document).on("click",".ngl-block-useall",(function(n){return n.preventDefault(),e(".ngl-block").each((function(){e(this).removeClass("ngl-block-unused").addClass("ngl-block-used"),e(this).find("input[type=checkbox]").prop("checked",!0)})),e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:"action=newsletterglue_ajax_use_all_blocks&security="+newsletterglue_params.ajaxnonce}),!1})),e(document).on("click",".ngl-block-disableall",(function(n){return n.preventDefault(),e(".ngl-block").each((function(){e(this).removeClass("ngl-block-used").addClass("ngl-block-unused"),e(this).find("input[type=checkbox]").prop("checked",!1)})),e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:"action=newsletterglue_ajax_disable_all_blocks&security="+newsletterglue_params.ajaxnonce}),!1})),e(document).on("change",".ngl-block-use input[type=checkbox]",(function(n){var t=e(this).attr("id");if(e(this).is(":checked")){var a="yes";e(this).parents(".ngl-block").removeClass("ngl-block-unused").addClass("ngl-block-used")}else{a="no";e(this).parents(".ngl-block").removeClass("ngl-block-used").addClass("ngl-block-unused")}e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:"action=newsletterglue_ajax_use_block&security="+newsletterglue_params.ajaxnonce+"&id="+t+"&value="+a})})),e(document).on("click",".ngl-textarea-reset",(function(n){n.preventDefault();var t=e("#"+e(this).attr("data-selector"));return t.val(t.attr("data-default")),t.trigger("change"),!1})),e(document).on("click",".ngl-textarea-append",(function(n){n.preventDefault();var t=e("#"+e(this).attr("data-selector")),a=e(this).attr("data-value");return t.val(t.val()+" "+a),t.trigger("change"),!1})),e(document).on("click",".ngl-block-demo",(function(n){n.preventDefault();var t=e(this).parents(".ngl-block").attr("data-block");return e(".ngl-popup-overlay").addClass("ngl-active"),e("body").addClass("ngl-popup-hidden"),e(".ngl-popup-overlay.ngl-active").find(".ngl-popup-panel").empty(),e(".ngl-popup-demo[data-block="+t+"]").appendTo(e(".ngl-popup-overlay.ngl-active").find(".ngl-popup-panel")),e(".ngl-popup-overlay.ngl-active").addClass("ngl-popup-overlay-demo"),e(".ngl-popup-overlay.ngl-active").removeClass("ngl-popup-overlay-settings"),!1})),e(document).on("click",".ngl-block-defaults a",(function(n){n.preventDefault();var t=e(this).parents(".ngl-block").attr("data-block");return e(".ngl-popup-overlay").addClass("ngl-active"),e("body").addClass("ngl-popup-hidden"),e(".ngl-popup-overlay.ngl-active").find(".ngl-popup-panel").empty(),e(".ngl-popup-settings[data-block="+t+"]").appendTo(e(".ngl-popup-overlay.ngl-active").find(".ngl-popup-panel")),e(".ngl-popup-overlay.ngl-active").removeClass("ngl-popup-overlay-demo"),e(".ngl-popup-overlay.ngl-active").addClass("ngl-popup-overlay-settings"),!1})),e(document).on("click",".ngl-popup-panel",(function(e){e.stopPropagation()})),e(document).on("click",(function(){l()})),e(document).on("click",".ngl-popup-close",(function(e){e.preventDefault(),l()})),e(document).on("click",".ngl-edit-more a",(function(n){n.preventDefault();var t=e(".ngl-edit-more-box");return t.hasClass("is-hidden")?(t.removeClass("is-hidden"),e(this).find("svg").replaceWith('<svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>')):(t.addClass("is-hidden"),e(this).find("svg").replaceWith('<svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>')),!1})),e(document).on("change",".ngl-popup-settings input[type=checkbox]",(function(n){var t=e(this).parents(".ngl-popup-settings").attr("data-block"),a=e(this).parents("form").serialize()+"&action=newsletterglue_ajax_save_block&security="+newsletterglue_params.ajaxnonce+"&id="+t;e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:a,success:function(e){}})})),e(document).on("click",".ngl-license-wrap-flex a.ngl-license-wrap-action",(function(n){n.preventDefault();var t=e(this).parents(".ngl-license-wrap"),a=t.find(".ngl-license-wrap-flex a.ngl-license-wrap-action"),l=t.find("#newsletterglue_pro_license"),s=l.val();if(s){var i="action=newsletterglue_check_license&newsletterglue_pro_license="+s+"&security="+newsletterglue_params.ajaxnonce;return e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:i,beforeSend:function(){a.addClass("is-hidden"),t.find("a.ngl-verifying-state").removeClass("is-hidden"),l.prop("disabled",!0)},success:function(n){l.prop("disabled",!1),"invalid"===n.status?(a.addClass("is-hidden"),t.find("a.ngl-invalid-state").removeClass("is-hidden"),t.find(".ngl-license-try-again").removeClass("is-hidden")):e(".ngl-boarding-change").length>0&&e(".ngl-boarding").is(":visible")?(t.parents(".ngl-boarding").find(".ngl-boarding-change").trigger("click"),a.addClass("is-hidden"),t.find("a.ngl-base-state").removeClass("is-hidden")):(t.find(".ngl-license-wrap-success").removeClass("is-hidden"),t.find(".ngl-license-wrap-close").removeClass("is-hidden"),e(".ngl-license-review").remove())}}),!1}l.focus()})),e(document).on("click",".ngl-reset-newsletter-pre",(function(n){return n.preventDefault(),e(".ngl-unschedule-confirm").hasClass("is-hidden")&&e(".ngl-unschedule-confirm").removeClass("is-hidden"),!1})),e(document).on("click",".ngl-unschedule-undo",(function(n){return n.preventDefault(),e(".ngl-unschedule-confirm").hasClass("is-hidden")||e(".ngl-unschedule-confirm").addClass("is-hidden"),!1})),e(document).on("click",".ngl-license-try-again",(function(n){n.preventDefault();var t=e(this).parents(".ngl-license-wrap");return e(this).addClass("is-hidden"),t.find(".ngl-license-wrap-action").addClass("is-hidden"),t.find("a.ngl-base-state").removeClass("is-hidden"),t.find("input[type=text]").val("").focus(),!1})),e(document).on("click",".ngl-license-wrap-close",(function(n){return n.preventDefault(),e(this).parents(".ngl-license-wrap").remove(),e(".ngl-license-review").remove(),!1})),e(document).on("change",".ngl-settings-mailchimp #ngl_audience, .ngl-mb-mailchimp #ngl_audience",(function(n){var t=e(this).val(),a="action=newsletterglue_ajax_get_tags&security="+newsletterglue_params.ajaxnonce+"&app=mailchimp&audience="+t,l=e(".ngl-metabox-segment");e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:a,beforeSend:function(){l.addClass("ngl-is-loading")},success:function(n){l.replaceWith(n),e(".ngl-metabox-segment").find(".ui.dropdown").dropdown()}})})),e(document).on("change",".ngl-settings-sendy #ngl_brand, .ngl-mb-sendy #ngl_brand",(function(n){var t=e(this).val(),a="action=newsletterglue_ajax_get_tags&security="+newsletterglue_params.ajaxnonce+"&app=sendy&audience="+t,l=e(".ngl-metabox-segment");e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:a,beforeSend:function(){l.addClass("ngl-is-loading")},success:function(n){l.replaceWith(n),e(".ngl-metabox-segment").find(".ui.dropdown").dropdown()}})})),e(document).on("click",".ngl-tabbed-check .ui.button",(function(n){n.preventDefault();var t=e(this).attr("data-value");return e(this).parents(".ngl-tabbed-check").find("input.ngl-value-hidden").val(t).trigger("change"),e(this).parents(".buttons").find(".button").removeClass("active"),e(this).addClass("active"),!1})),e(window).on("load",(function(){e("#ngl_select_role").length&&e("#ngl_select_role").dropdown("set selected","editor"),g(),setTimeout((function(){if(e("#ngl_send_newsletter").length&&0==e(".ngl-no-connection").length&&0==e(".ngl-msgbox-wrap:visible").length&&0==e(".ngl-reset:visible").length&&newsletterglue_params.send_newsletter){e(".editor-header__settings").prepend('<div class="ngl-top-checkbox"><label><input type="checkbox" name="ngl_send_newsletter2" id="ngl_send_newsletter2" value="1">'+newsletterglue_params.send_newsletter+"</label></div>")}if(c||u){var n="action=newsletterglue_save_default_colors&colors="+(c?JSON.stringify(c):"")+"&sizes="+(u?JSON.stringify(u):"")+"&security="+newsletterglue_params.ajaxnonce;e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:n,success:function(e){}})}}),1e3)})),e(window).on("keydown",(function(n){if((n.ctrlKey||n.metaKey)&&"s"===String.fromCharCode(n.which).toLowerCase())n.preventDefault(),e("#ngl_double_confirm").val("no")})),setTimeout((function(){e(".interface-interface-skeleton__content").on("scroll",(function(){var n=e(".ngl-gutenberg-pop");if(n.hasClass("is-open")){if(e(".block-editor-block-toolbar").hasClass("is-showing-movers")){var t=e(".ngl-toolbar-mergetags").offset().top+e(".ngl-toolbar-mergetags").height()+24;e(".block-editor-block-toolbar").offset().left}else t=e(".block-editor-block-toolbar").offset().top+e(".ngl-toolbar-mergetags").height()+24,e(".block-editor-block-toolbar").offset().left;n.css({top:t+"px"})}}))}),1e3),e(document).on("click",".ngl-toolbar-mergetags",(function(){var n=e(".ngl-gutenberg-pop");if(e(this).parents(".block-editor-block-toolbar").hasClass("is-showing-movers"))var t=e(this).offset().top+e(this).height()+24,a=e(this).offset().left;else t=e(this).parents(".block-editor-block-toolbar").offset().top+e(this).height()+24,a=e(this).offset().left;n.hasClass("is-open")?m():(n.addClass("is-open"),n.css({left:a+"px",top:t+"px"}))})),e("body").on("click",(function(n){e(".ngl-gutenberg-pop");if(e(n.target).parents(".ngl-toolbar-mergetags").length||e(n.target).hasClass("ngl-toolbar-mergetags"))return!0;e(n.target).is(".ngl-gutenberg-pop")||e(n.target).parents(".ngl-gutenberg-pop").length||m()})),e(document).on("click",".ngl-submenu-trigger",(function(){e(this).hasClass("is-triggered")?(e(this).parents("div[role=group]").find(".ngl-submenu-item").css({display:"none"}),e(this).parents("div[role=group]").find(".ngl-outside-helper").css({display:"none"}),e(this).removeClass("is-triggered"),e(this).find("svg").html('<path d="M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"></path>'),e(".ngl-fallback").hide(),e(".ngl-submenu-item").removeClass("is-active")):(e(this).parents("div[role=group]").find(".ngl-submenu-item").css({display:"inline-flex"}),e(this).parents("div[role=group]").find(".ngl-outside-helper").css({display:"block"}),e(this).addClass("is-triggered"),e(this).find("svg").html('<path d="M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"></path>'))})),e(document).on("click",".ngl-submenu-item",(function(){var n=e(this).attr("data-ngl-tag"),t=e(this).attr("data-tag-id"),a=e("input[type=text]#__fallback_"+t),l=wp.data.select("core/block-editor").getSelectedBlock(),s=e(this),i=Math.round((new Date).getTime()+100*Math.random());if(s.attr("data-require-fb")&1==s.attr("data-require-fb")&&""==a.val())return s.find(".ngl-gutenberg-icon").trigger("click"),a.addClass("is-mandatory"),!1;(m(),"unsubscribe_link"==t||"webversion"==t||"blog_post"==t||"update_preferences"==t)?n='<a href="'+n+'">'+(a.val()?a.val():e(this).attr("data-default-link-text"))+'</a><i class="ngl-tag-spacer" id="ngl-tag-spacer-'+i+'">&nbsp;</i>':(a.length&&(n=n.replace(" }}",",fallback="+a.val()+" }}")),n='<span class="ngl-tag">'+n+'</span><i class="ngl-tag-spacer" id="ngl-tag-spacer-'+i+'">&nbsp;</i>');var r=wp.data.select("core/block-editor").getSelectionStart().offset,o=wp.data.select("core/block-editor").getSelectionEnd().offset,d=l.attributes.content,g=wp.richText.create({html:d});g=wp.richText.insert(g,n,r,o),l.attributes.content=wp.richText.toHTMLString({value:g}).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),wp.data.dispatch("core/block-editor").updateBlock(l.clientId,l.attributes);var c=document.getElementById("ngl-tag-spacer-"+i),u=document.createRange(),p=window.getSelection();u.setStartAfter(c,0),u.collapse(!0),p.removeAllRanges(),p.addRange(u),c.focus()})),e(document).on("click",".ngl-gutenberg-icon",(function(n){n.stopPropagation();var t=e(this).parents("button").attr("data-tag-id");e(".ngl-fallback:not([data-tag="+t+"])").hide(),e("button.ngl-submenu-item").removeClass("is-active"),e(".ngl-fallback[data-tag="+t+"]").is(":hidden")?(e(".ngl-fallback[data-tag="+t+"]").show(),e(".ngl-fallback[data-tag="+t+"]").find("input").focus(),e(this).parents("button").addClass("is-active")):(e(".ngl-fallback[data-tag="+t+"]").hide(),e(this).parents("button").removeClass("is-active"))})),e(document).on("keyup",".ngl-fallback-input input",(function(n){if("Enter"===n.key||13===n.keyCode){var t=e(this).attr("data-tag-input-id"),a=e(".ngl-submenu-item[data-tag-id="+t+"]");if(e(this).hasClass("is-mandatory")&&""==e(this).val())return!1;a.trigger("click")}})),e(document).on("change",".ngl-fallback-input input",(function(n){""!=e(this).val()?e(this).removeClass("is-mandatory"):e(this).addClass("is-mandatory")})),e(document).on("change",".ngl-fallback-input input[type=text]",(function(){var n=e(this).attr("data-tag-input-id"),t=e(this).val(),a="action=newsletterglue_update_merge_tag&security="+newsletterglue_params.ajaxnonce+"&id="+n+"&value="+encodeURIComponent(t);e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:a,success:function(){}})})),e(document).on("click",".type-ngl_pattern span.edit a, .post-type-ngl_pattern a.row-title",(function(n){if(e(this).parents("td").find(".ngl-pattern-state").length){var t=e(this).parents("td").find(".row-actions");if(0==t.find(".ngl-pattern-row").length){n.preventDefault(),t.find("span.ngl_duplicate").addClass("ngl-bold");var a=newsletterglue_params.pattern_edit;return t.append(a),!1}}})),e(document).on("click",".type-ngl_template span.edit a, .post-type-ngl_template a.row-title",(function(n){if(e(this).parents("td").find(".ngl-pattern-state").length){var t=e(this).parents("td").find(".row-actions");if(0==t.find(".ngl-pattern-row").length){n.preventDefault(),t.find("span.ngl_duplicate").addClass("ngl-bold");var a=newsletterglue_params.template_edit;return t.append(a),!1}}})),e(document).on("click",".ngl-pattern-bk",(function(n){return n.preventDefault(),e(this).parents("td").find(".row-actions").find("span.ngl_duplicate").removeClass("ngl-bold"),e(this).parents(".ngl-pattern-row").remove(),!1})),e(".ngl-pattern-reset-ui").length&&e(".ngl-pattern-extra-ui").insertAfter(".wp-header-end"),e(document).on("click",".ngl-pattern-reset-toggle",(function(n){n.preventDefault();var t=e(this).parents(".ngl-pattern-reset").find(".ngl-pattern-reset-ui");return t.is(":visible")?t.hide():t.show(),!1})),e(document).on("change",".ngl-pattern-reset-ui select",(function(n){n.preventDefault();var t=e(this).find(":selected").attr("data-url");return e(this).parents(".ngl-pattern-reset-ui").find(".ngl-pattern-reset-start").attr("href",t),!1})),e(document).on("change","#ngl_select_role",(function(n){n.preventDefault();var t=e(this).parents(".ngl-metabox-flex"),a=e(this).val();return"administrator"===a?(e(".ngl-show-if-administrator").show(),e(".ngl-save-perms").addClass("disabled"),t.find("input[type=checkbox]").attr("disabled",!0)):(e(".ngl-show-if-administrator").hide(),e(".ngl-save-perms").removeClass("disabled"),t.find("input[type=checkbox]").removeAttr("disabled",!0)),e(".ngl-perms-header, .ngl-perms-group").hide(),a&&(e(".ngl-metabox-header-"+a).show(),e(".ngl-input-group-"+a).show(),e(".ngl-save-perms").parent().show()),e(".ngl-reset-this").attr("data-role",a),!1})),e(".ngl-add-newsletter-checkbox").on("change",(function(){e(this).is(":checked")&&e(this).parents(".ngl-input-group").find(".ngl-edit-newsletter-checkbox").prop("checked",!0)})),e(".ngl-edit-newsletter-checkbox").on("change",(function(){e(this).is(":checked")||e(this).parents(".ngl-input-group").find(".ngl-add-newsletter-checkbox").prop("checked",!1)})),e(document).on("click",".ngl-flex-action",(function(n){n.preventDefault();var t=e(".ngl-setting-reset");return e(this).parents(".ngl-flex-actions").find(".ngl-flex-action").not(e(this)).addClass("ngl-disable-action"),t.hasClass("is-hidden")?(t.removeClass("is-hidden"),t.find(".ngl-theme-reset-confirm, .ngl-theme-reset-btns").removeClass("is-hidden"),t.find(".ngl-process").addClass("is-hidden"),e(this).attr("data-no-role")?t.find(".ngl-reset-this").attr("data-role",""):t.find(".ngl-reset-this").attr("data-role",e("#ngl_select_role").val())):(t.addClass("is-hidden"),t.find(".ngl-theme-reset-confirm, .ngl-theme-reset-btns").addClass("is-hidden"),t.find(".ngl-process").addClass("is-hidden"),e(this).parents(".ngl-flex-actions").find(".ngl-flex-action").removeClass("ngl-disable-action")),!1})),e(document).on("click",".ngl-reset-undo",(function(n){n.preventDefault();var t=e(".ngl-setting-reset");return t.addClass("is-hidden"),t.find(".ngl-theme-reset-confirm, .ngl-theme-reset-btns").addClass("is-hidden"),t.find(".ngl-process").addClass("is-hidden"),e(this).parents(".ngl-flex-actions").find(".ngl-flex-action").removeClass("ngl-disable-action"),!1})),e(document).on("click",".ngl-reset-role",(function(n){n.preventDefault();var t=e(this).parents(".ngl-setting-reset"),a=e(this).attr("data-role"),l="action=newsletterglue_reset_user_roles&security="+newsletterglue_params.ajaxnonce+"&role="+encodeURIComponent(a);return e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:l,beforeSend:function(){t.find(".ngl-process.is-waiting").removeClass("is-hidden")},success:function(n){t.find(".ngl-process.is-waiting").addClass("is-hidden"),t.find(".ngl-process.is-valid").removeClass("is-hidden"),setTimeout((function(){t.addClass("is-hidden"),t.find(".ngl-theme-reset-confirm, .ngl-theme-reset-btns").addClass("is-hidden"),t.find(".ngl-process").addClass("is-hidden"),t.parents(".ngl-flex-actions").find(".ngl-flex-action").removeClass("ngl-disable-action")}),1500),n&&e(".ngl-perms-group").find("input[type=checkbox]").each((function(){var t=e(this).attr("name").replace("ngl_perms_",""),a=e(this).attr("id");n[t]&&n[t][a]?e(this).prop("checked",!0):e(this).prop("checked",!1)}))}}),!1})),e(document).on("click","a.ngl-tpl-make-default",(function(n){n.preventDefault();var t=e(this).parent().attr("data-post-id"),a=e(this),l=a.parent(),s="action=newsletterglue_set_default_template&security="+newsletterglue_params.ajaxnonce+"&post_id="+t;e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:s,beforeSend:function(){e(".ngl-tpl-default").replaceWith(newsletterglue_params.make_default_tpl),e(".ngl-tpl-noshortcut").each((function(){1==e(this).parent().attr("data-is-shortcut")?e(this).replaceWith(newsletterglue_params.shortcut_added):e(this).replaceWith(newsletterglue_params.add_shortcut)})),a.replaceWith(newsletterglue_params.default_tpl),l.find(".ngl-tpl-shortcut, .ngl-tpl-undo-shortcut").replaceWith(newsletterglue_params.no_shortcut)},success:function(n){e("a.page-title-action, .toplevel_page_newsletter-glue .wp-submenu li:nth-child(3) a").attr("href",n.url)}})})),e(document).on("click","a.ngl-tpl-default",(function(n){n.preventDefault();var t=e(this).parent().attr("data-post-id"),a=e(this),l=a.parent(),s="action=newsletterglue_unset_default_template&security="+newsletterglue_params.ajaxnonce+"&post_id="+t;e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:s,beforeSend:function(){a.replaceWith(newsletterglue_params.make_default_tpl),l.find(".ngl-tpl-noshortcut").replaceWith(newsletterglue_params.add_shortcut)},success:function(n){e("a.page-title-action, .toplevel_page_newsletter-glue .wp-submenu li:nth-child(3) a").attr("href",n.url)}})})),e(document).on("click","a.ngl-tpl-shortcut",(function(n){n.preventDefault();var t=e(this).parent().attr("data-post-id"),a=e(this),l=(a.parent(),"action=newsletterglue_set_template_shortcut&security="+newsletterglue_params.ajaxnonce+"&post_id="+t);e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:l,beforeSend:function(){a.replaceWith(newsletterglue_params.shortcut_added)},success:function(e){}})})),e(document).on("click","a.ngl-tpl-undo-shortcut",(function(n){n.preventDefault();var t=e(this).parent().attr("data-post-id"),a=e(this),l=(a.parent(),"action=newsletterglue_unset_template_shortcut&security="+newsletterglue_params.ajaxnonce+"&post_id="+t);e.ajax({type:"post",url:newsletterglue_params.ajaxurl,data:l,beforeSend:function(){a.replaceWith(newsletterglue_params.add_shortcut)},success:function(e){}})})),e(document).on("click",".ngd-launch-video",(function(n){n.preventDefault();var t=e(this).attr("data-src");return e(".ngd-tut-overlay").addClass("opened"),e(".ngd-tut-overlay div").html('<iframe src="'+t+'" allow="autoplay" frameborder="0" allowfullscreen></iframe>'),!1})),e(document).on("click",(function(n){event&&"ngd-tut-overlay opened"==e(event.target).attr("class")&&(e(".ngd-tut-overlay div").empty(),e(".ngd-tut-overlay").removeClass("opened"))})),e(document).on("click",".ngl-input-tags u",(function(){var n=e(this).text();if(n){var t="#ngl_subject";e(this).parents(".ngl-input-tags").attr("data-field")&&(t="#"+e(this).parents(".ngl-input-tags").attr("data-field")),e(t).val(e(t).val()+n).focus().trigger("change")}})),e(document).on("click","#ngl-open-merge-tags",(function(n){n.preventDefault(),e("#ngl-merge-tags-modal").show()})),e(document).on("click","#ngl-close-merge-tags, #ngl-close-merge-tags-btn",(function(){e("#ngl-merge-tags-modal").hide()})),e(document).on("click","#ngl-merge-tags-modal",(function(n){n.target===this&&e(this).hide()})),e(document).on("click",".ngl-merge-tag-card",(function(n){if(!e(n.target).is("u")&&!e(n.target).closest("u").length){n.preventDefault();var t=e(this).attr("data-tag");if(t){var a=e("#ngl_subject");a.val().length>0&&!a.val().endsWith(" ")&&a.val(a.val()+" "),a.val(a.val()+t).focus().trigger("change"),e("#ngl-merge-tags-modal").hide()}}})),e(document).on("change","input[name=ngl_send_type]",(function(){e(".ngl-radio-group .field").removeClass("choice-checked").addClass("choice-unchecked"),e(".ngl-radio-group .field[data-id="+e(this).attr("id")+"]").addClass("choice-checked").removeClass("choice-unchecked")})),e(".ngl-mb-sendgrid").length>0){var h=e(".ngl-mb-sendgrid"),f=h.find(".sg-list").find(".ui.dropdown").dropdown("get value");f&&f.length?(h.find(".sg-segment .ui.dropdown").addClass("disabled"),h.find(".sg-segment .ui.dropdown").dropdown("clear"),0==h.find(".sg-segment .field .ng-sg-warn").length&&h.find(".sg-segment .field").append('<div class="ng-sg-warn">To select segment, delete list first.</div>')):(h.find(".sg-segment .ui.dropdown").removeClass("disabled"),h.find(".sg-segment .field .ng-sg-warn").remove())}e(document).on("change",".ngl-mb-sendgrid #ngl_lists",(function(){var n=e(".ngl-mb-sendgrid"),t=n.find(".sg-list").find(".ui.dropdown").dropdown("get value");t&&t.length?(n.find(".sg-segment .ui.dropdown").addClass("disabled"),n.find(".sg-segment .ui.dropdown").dropdown("clear"),0==n.find(".sg-segment .field .ng-sg-warn").length&&n.find(".sg-segment .field").append('<div class="ng-sg-warn">To select segment, delete list first.</div>')):(n.find(".sg-segment .ui.dropdown").removeClass("disabled"),n.find(".sg-segment .field .ng-sg-warn").remove())}))}(jQuery);